# zooCmd: A middleware for module decoupling.
## 项目描述：
* 该项目在模块划分上，实现了一个命令行程序、带界面的程序和一个命令集框架中间件，后者提供了一个窄接口，即用户程序只需要包含一个C接口形式的头文件就可以使用。用法类似cmd.exe，包含内置命令和用户自定义命令，不过cmd.exe是将一个exe作为命令执行，此框架将一个dll作为命令执行。
* 宽接口是框架的所有头文件，提供给用于实现具体功能的插件使用。插件必须实现一个继承自框架中Cmd类的具体类。通过C++反射将这个具体命令类注册进框架中，便可以将自己的功能集成进框架。后续需要分布式开发的话，每个人只需要实现一个自己维护的dll项目，需要暴露给客户程序的功能，以插件命令名后面跟命令行参数的形式定义。
* 这个框架实现了用户程序在使用上的简单轻便，满足了多人可以独立开发，保证代码松耦合的需求（例如界面使用Qt实现，通过发送命令的形式和包含所需功能的插件交互）。
## 架构流程：
* 框架支持三大解耦模式：组件模式、服务定位器模式、事件队列模式。
* 组件继承自zoo::Component结构体，其成员一般情况下作为public使用，该结构体不进行dllexport，成员变量作为共享数据进行交互，成员函数导出到lua，使用脚本语言进行开发逻辑的编写工作。这里需要持久化的内容都定义在组件中，实现了整个实体组件构建起的场景的序列化与反序列化（定位：数据持久化和业务逻辑脚本化）。
* 组件实现类继承自zoo::ComponentImpl类，这里包含了组件功能的具体实现细节，目前框架实现了基于osg的组件功能，在awake()中进行组件实现类的初始化工作，在update()更新方法中根据组件共享数据的脏标识实时刷新组件实现类的功能单元（定位：组件使用流程和具体功能解耦）。
* 命令机制用于某个具体功能的实现，比如屏幕截屏等。其在接口使用层面和功能实现层面做到了模块化解耦（定位：串联组件实现类的对象或使用第三方库实现某个特定功能，且不需要对数据进行持久化处理）。
## 依赖库：
* 图形渲染：osg和osgearth。
* 用户界面：Qt和CTK插件框架。
